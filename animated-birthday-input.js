let dayValue="",monthValue="",yearValue="",isErrorYear=!1,isErrorDay=!1,isErrorMonth=!1;var today=new Date,currentDay=today.getDate(),currentMonth=today.getMonth()+1,currentYear=today.getFullYear();const errorMessages=document.querySelectorAll(".error");document.querySelector(".birthday-logo").src="./icons/calendar.png";const input = document.querySelectorAll('.birthdate-input');
for(i=0;i<3;i++)input[i].setAttribute("size",.9*input[i].getAttribute("placeholder").length),input[i].addEventListener("focusin",inputBorderColorFocusin);

function inputBorderColorFocusin(){document.querySelector('.birthdate-input-main').style.borderColor = isErrorYear || isErrorDay || isErrorMonth ? 'red' : '#0077ff';}
function inputBorderColorFocusout(){document.querySelector('.birthdate-input-main').style.borderColor = isErrorYear || isErrorDay || isErrorMonth ? 'red' : 'gray';}
function isBorn(r,n,e){return!(e>currentYear)&&(""==r||""==e||""==n||!(e==currentYear&&n>currentMonth)&&!(e==currentYear&&n==currentMonth&&r>currentDay))}
function yearIcon(e){var r=currentYear-yearValue;""!=yearValue&&150<=r?document.querySelector(".birthday-logo").src="./icons/rip.png":r<150&&60<r?document.querySelector(".birthday-logo").src="./icons/old.png":0<=r&&r<=10?document.querySelector(".birthday-logo").src="./icons/baby.png":11<=r&&r<=60&&(document.querySelector(".birthday-logo").src="./icons/teen.png")}
function monthIcon(o,r){if(""==o||""==r)return!0;21<=o&&3==r||o<20&&4==r?document.querySelector(".birthday-logo").src="./icons/aries.png":20<=o&&4==r||o<21&&5==r?document.querySelector(".birthday-logo").src="./icons/taurus.png":21<=o&&5==r||o<21&&6==r?document.querySelector(".birthday-logo").src="./icons/gemini.png":21<=o&&6==r||o<23&&7==r?document.querySelector(".birthday-logo").src="./icons/cancer.png":23<=o&&7==r||o<23&&8==r?document.querySelector(".birthday-logo").src="./icons/leo.png":23<=o&&8==r||o<23&&9==r?document.querySelector(".birthday-logo").src="./icons/virgo.png":23<=o&&9==r||o<23&&10==r?document.querySelector(".birthday-logo").src="./icons/libra.png":23<=o&&10==r||o<22&&11==r?document.querySelector(".birthday-logo").src="./icons/scorpio.png":22<=o&&11==r||o<22&&12==r?document.querySelector(".birthday-logo").src="./icons/sagittarius.png":22<=o&&12==r||o<20&&1==r?document.querySelector(".birthday-logo").src="./icons/capricorn.png":20<=o&&1==r||o<19&&2==r?document.querySelector(".birthday-logo").src="./icons/aquarius.png":(19<=o&&2==r||o<20&&3==r)&&(document.querySelector(".birthday-logo").src="./icons/pisces.png")}
function isValidDay(r,i,n){if(""==r)return!0;if(31<r)return!1;if(31==r&&i in[2,4,6,9,11])return!1;if(29<r&&2==i)return!1;if(29==r&&2==i&&""!=n){let r=n%400==0?!0:n%4==0&&n%100!=0?!0:!1;if(!r)return!1}return!0}
function isValidMonth(month){ return (month<13 && month>0) || month=='' ?  true :  false; }
function defaultIcon(){ document.querySelector('.birthday-logo').src="./icons/calendar.png"; }
function computeErrorsAndIcons(r,s,o){isBorn(r,s,o)&&isValidDay(r,s,o)&&isValidMonth(s)?(isErrorYear=!1,isErrorDay=!1,isErrorMonth=!1,defaultIcon(),monthIcon(r,s),yearIcon(o)):(isBorn(r,s,o)?errorMessages[2].style.display="none":(isErrorYear=!0,errorMessages[2].style.display="block"),isValidDay(r,s,o)?errorMessages[0].style.display="none":(isErrorDay=!0,errorMessages[0].style.display="block"),isValidMonth(s)?errorMessages[1].style.display="none":(isErrorMonth=!0,errorMessages[1].style.display="block"),document.querySelector(".birthday-logo").src="./icons/error.png")}

input[0].addEventListener("focusout",function(){dayValue=input[0].value,String(dayValue).length<2&&0<String(dayValue).length&&(input[0].value="0"+String(dayValue)),computeErrorsAndIcons(dayValue,monthValue,yearValue),inputBorderColorFocusout()}),input[0].addEventListener("click",function(){errorMessages[0].style.display="none",isErrorDay=!1,dayValue="",input[0].value=""});
input[1].addEventListener("focusout",function(){monthValue=input[1].value,String(monthValue).length<2&&0<String(monthValue).length&&(input[1].value="0"+String(monthValue)),computeErrorsAndIcons(dayValue,monthValue,yearValue),inputBorderColorFocusout()}),input[1].addEventListener("click",function(){errorMessages[1].style.display="none",isErrorMonth=!1,monthValue="",input[1].value=""});
input[2].addEventListener("focusout",function(){yearValue=input[2].value,computeErrorsAndIcons(dayValue,monthValue,yearValue),inputBorderColorFocusout()}),input[2].addEventListener("click",function(){errorMessages[2].style.display="none",isErrorYear=!1,yearValue="",input[2].value=""});
